{% extends 'blog.html.twig' %}

{% block body %}
    <div class="row">
        <div class="col-12">
            <div class="h-100">
                <div id="activityMap" class="map" style="width: 100%; height: 72vh;"></div>
            </div>
        </div>
    </div>
{% endblock %}

{% block stylesheets %}
    <link rel="stylesheet" href="/assets/css/leaflet.css" />
{% endblock %}

{% block javascripts %}
    <script src="/assets/js/leaflet.js"></script>
    <script type="text/javascript" src="/assets/js/polyline.encoded.js"></script>
    <script>
        var map = L.map('activityMap').setView([52.005, 5.09], 9);

        L.tileLayer(
            'https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                maxZoom: 18,
            }).addTo(map);
        var encoded = "";
        var coordinates = "";
        {% for activity in activities %}
            encoded = "{{ activity.response.map.polyline|replace({'\\': '\\\\'}) }}";
            coordinates = L.Polyline.fromEncoded(encoded).getLatLngs();

        L.polyline(
                coordinates,
                {
                    color: 'blue',
                    weight: 2,
                    opacity: .7,
                    lineJoin: 'round'
                }
            ).addTo(map);
        {% endfor %}
    </script>
{% endblock %}
